(this["webpackJsonpstock-lookup"]=this["webpackJsonpstock-lookup"]||[]).push([[0],{56:function(e,t,c){},62:function(e,t,c){},66:function(e,t,c){},67:function(e,t,c){},71:function(e,t,c){},72:function(e,t,c){"use strict";c.r(t);var n=c(0),a=c(20),r=c.n(a),s=(c(56),c(21)),o=c(16),i=c(8),l=c(7),j=c(17),d=c(1),u=function(){var e={color:"#F15B2A"};return Object(d.jsxs)("nav",{children:[Object(d.jsx)(j.c,{to:"/",activeStyle:e,exact:!0,children:"Home"})," | ",Object(d.jsx)(j.c,{to:"/stock",activeStyle:e,children:"Stock Page"})]})},b=(c(62),function(e){var t=e.checkPoint,c=e.handleCheckpointChange;return Object(d.jsxs)("div",{className:"st-checkpoint d-flex align-items-center mb-3",children:[Object(d.jsx)("span",{className:"mr-3",children:"Select checkpoint"}),Object(d.jsxs)("select",{value:t.time,name:"time",onChange:c,className:"custom-select mr-3",children:[Object(d.jsx)("option",{value:"1",children:"After One our"}),Object(d.jsx)("option",{value:"3",children:"After Two ours"}),Object(d.jsx)("option",{value:"5",children:"After Three ours"}),Object(d.jsx)("option",{value:"7",children:"After four ours"})]}),Object(d.jsx)("span",{className:"mr-3",children:"checkpoint value"}),Object(d.jsxs)("div",{className:"input-group",children:[Object(d.jsx)("input",{value:t.percent,type:"number",name:"percent",step:"0.5",className:"form-control",onChange:c}),Object(d.jsx)("div",{className:"input-group-append",children:Object(d.jsx)("span",{className:"input-group-text",children:"%"})})]})]})}),h=c(9),O=c.n(h),m=function(e,t){return parseFloat((100*(t-e)/e).toFixed(2))},p=function(e){if(O.a.isArray(e)){var t=e[0].datetime.split(" "),c=Object(i.a)(t,1)[0];return O.a.reduce(e,(function(e,t){var n=t.datetime.split(" "),a=Object(i.a)(n,2),r=a[0],s=a[1];return c===r||(e[r]||(e[r]=[])).push(Object(o.a)(Object(o.a)({},t),{},{day:r,time:s})),e}),{})}},f=function(e,t){var c=O()(e).map((function(e,c){try{var n=e[0].open,a=e[t.time].close,r=e[e.length-1].close,s=n<a&&a<r||n>a&&a>r,o=m(n,a),i=m(a,r);return{day:c,match:s,matchPercent:t.percent<=Math.abs(o),startOfDay:n,checkpointTime:a,endOfDay:r,checkpointTimePercentage:o,endOfDayPercentage:i}}catch(l){return console.warn("[analyzeStockData] - one error happened on day ".concat(c)),!1}})).compact().reverse().value();return""!==t.percent?O.a.filter(c,(function(e){return e.matchPercent})):c},x=c(30),v=c.n(x),k=c(38),g={ZM:"Zoom",NVDA:"NVIDIA",TSLA:"Tesla",PYPL:"PayPal",AAPL:"Apple",FB:"Facebook",PFE:"Pfizer",BA:"Boeing",BIDU:"Baidu",WFC:"Wells Fargo",CAT:"Caterpillar",NFLX:"Netflix",WMT:"Walmart",AMZN:"Amazon",INTC:"Intel",MSFT:"Microsoft",GOOG:"Alphabet",NKE:"Nike",GILD:"Gilead",CRM:"salesforce.com",JPM:"JPMorgan",ABT:"Abbott",MA:"MasterCard",DIS:"Walt Disney",JNJ:"J & J",ADBE:"Adobe",IBM:"IBM",BAC:"Bank Of America",MCD:"McDonald's",AVGO:"Broadcom",QCOM:"Qualcomm",BRK:"B  \tBerkshire Hathaway",BIIB:"Biogen",VZ:"Verizon",C:"Citi Group",T:"AT&T",BMY:"Bristol Myers",GS:"Goldman Sachs",KO:"Coca Cola",MS:"Morgan Stanley",NYSE:"Colgate-Palmolive",GE:"General Electric",V:"Visa",MMM:"3M",COP:"ConocoPhillips",MRK:"Merck",CSCO:"Cisco",SBUX:"Starbucks",PM:"Philip Morris",LMT:"Lockheed Martin"},y=function(){return g},S=function(e,t){var c=C(),n=v()().format("YYYY-MM-DD"),a="stock_".concat(e,"_").concat(n),r=Object(k.decompress)(localStorage.getItem(a)),s=Object.entries(localStorage).map((function(e){return e[0]})).find((function(t){return t.includes(e)})),o=null===s||void 0===s?void 0:s.split("_")[2];return s&&o&&o!==n&&localStorage.removeItem(s),r&&!t?new Promise((function(e){return e(JSON.parse(r))})):fetch("https://api.twelvedata.com/time_series?symbol=".concat(e,"&outputsize=2000&interval=30min&order=ASC&apikey=").concat(c)).then((function(e){var t=e.json();return t.then((function(e){return localStorage.setItem(a,Object(k.compress)(JSON.stringify(e)))})),t}))},C=function(){return localStorage.getItem("twelve-data-api-key")},M=function(e){return fetch("https://api.twelvedata.com/api_usage?apikey=".concat(e)).then((function(e){return e.json()})).then((function(t){if(t.code)throw t;return function(e){localStorage.setItem("twelve-data-api-key",e)}(e),t}),(function(e){return console.error(e),e}))},P=c(51),A=c(31),N=c(26),D=(c(66),function(e){var t=e.data;return Object(d.jsxs)("div",{children:[Object(d.jsx)("div",{className:"badge ".concat(t.match?"badge-success":"badge-danger"),children:t.day}),Object(d.jsxs)("table",{className:"table table-bordered",children:[Object(d.jsx)("thead",{children:Object(d.jsxs)("tr",{children:[Object(d.jsx)("th",{scope:"col",children:"Match"}),Object(d.jsx)("th",{scope:"col",children:"Start Of Day"}),Object(d.jsx)("th",{scope:"col",children:"On Checkpoint"}),Object(d.jsx)("th",{scope:"col",children:"End Of Day"})]})}),Object(d.jsxs)("tbody",{children:[Object(d.jsxs)("tr",{children:[Object(d.jsx)("th",{children:t.startOfDay}),Object(d.jsx)("td",{children:t.startOfDay}),Object(d.jsx)("td",{children:t.checkpointTime}),Object(d.jsx)("td",{children:t.endOfDay})]}),Object(d.jsxs)("tr",{children:[Object(d.jsx)("th",{className:"table-icon-cell",children:Object(d.jsx)(A.a,{icon:t.match?N.b:N.a,className:t.match?"text-success":"text-danger"})}),Object(d.jsx)("td",{children:"-"}),Object(d.jsxs)("td",{className:t.checkpointTimePercentage>0?"text-success":"text-danger",children:[t.checkpointTimePercentage,"%"]}),Object(d.jsxs)("td",{className:t.endOfDayPercentage>0?"text-success":"text-danger",children:[t.endOfDayPercentage,"%"]})]})]})]})]})}),B=(c(67),function(e){var t=e.data,c=e.title,n=e.stockCode,a=e.lastUpdate,r=e.handleUpdate,s=e.isLoading,o=e.showMatchAnyway,i=null===t||void 0===t?void 0:t.length,l=O.a.filter(t,"match").length,u=O.a.filter(t,["match",!1]).length;return Object(d.jsxs)("div",{className:"summary-container d-flex",children:[Object(d.jsxs)("div",{children:[c&&Object(d.jsx)("h4",{children:n?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(j.b,{to:"/stock/".concat(n),children:c})," ",Object(d.jsxs)("small",{children:["(",n,")"]})]}):c}),(a||o)&&Object(d.jsxs)("div",{children:[Object(d.jsxs)("span",{className:"text-success mr-3 d-inline-block sum-match",children:["Match: ",l]}),Object(d.jsxs)("span",{className:"text-danger mr-3 d-inline-block sum-not-match",children:["Not Match: ",u]}),Object(d.jsxs)("span",{className:(i?"mr-3":"invisible")+" text-primary d-inline-block sum-percent",children:[(100*l/i).toFixed(0),"%"]})]})]}),(a||!i)&&Object(d.jsxs)(d.Fragment,{children:[a&&Object(d.jsxs)("div",{children:[Object(d.jsx)("h4",{children:Object(d.jsx)("small",{children:"Last Update"})}),Object(d.jsx)("div",{children:Object(d.jsx)("small",{children:v()(a).format("DD-MM-YYYY")})})]}),Object(d.jsx)("div",{className:"d-flex align-items-center pl-3",role:"button",title:"Update",children:Object(d.jsx)(A.a,{icon:N.c,onClick:function(){return r(n)},spin:s})})]})]})}),I=function(e){var t=e.currentStock,c=e.handleStockSelect,n=y();return Object(d.jsx)("select",{value:t,name:"stock-select",onChange:c,className:"custom-select",children:O.a.map(n,(function(e,t){return Object(d.jsx)("option",{value:t,children:e},t)}))})},w=function(e){var t=e.currentStock,c=e.analyticData,n=e.handleStockSelect,a=(Object(P.a)(e,["currentStock","analyticData","handleStockSelect"]),y());return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("h2",{children:[a[t]," Stock (",t,")"]}),Object(d.jsx)(I,{currentStock:t,handleStockSelect:n}),Object(d.jsx)(B,{data:c,showMatchAnyway:!0}),O.a.map(c,(function(e){return Object(d.jsx)("div",{children:Object(d.jsx)("div",{children:Object(d.jsx)(D,{data:e})})},e.day)}))]})},T=function(e){var t=e.checkPoint,c=(e.match,Object(l.f)().code),a=Object(n.useState)(null),r=Object(i.a)(a,2),s=r[0],o=r[1],j=Object(n.useState)(!1),u=Object(i.a)(j,2),b=u[0],h=u[1],O=Object(n.useState)(c||"AAPL"),m=Object(i.a)(O,2),x=m[0],v=m[1],k=Object(n.useState)([]),g=Object(i.a)(k,2),y=g[0],C=g[1],M=Object(n.useState)([]),P=Object(i.a)(M,2),A=P[0],N=P[1],D=Object(n.useState)([]),B=Object(i.a)(D,2),I=B[0],T=B[1];Object(n.useEffect)((function(){S(x).then((function(e){h(!0),C(e)}),(function(e){h(!0),o(e)}))}),[x]),Object(n.useEffect)((function(){N(p(y.values))}),[y]),Object(n.useEffect)((function(){T(f(A,t))}),[A,t]);return s?Object(d.jsxs)("div",{children:["Error: ",s.message]}):b?Object(d.jsx)(w,{analyticData:I,currentStock:x,handleStockSelect:function(e){e.preventDefault(),h(!1);var t=e.target.value;v(t)}}):Object(d.jsx)("h1",{children:"Loading..."})},F=c(46),L=function(e){var t=O()(Object.entries(localStorage)).filter((function(e){return e[0].includes("stock_")})).map((function(e){return[e[0],JSON.parse(Object(k.decompress)(e[1]))]})).value();return O()(t).map((function(t){var c=t[1],n=t[0].split("_")[2],a=p(c.values);return{stockCode:c.meta.symbol,stockData:f(a,e),lastUpdate:n}})).sortBy(["stockCode"]).value()},E=function(e){var t=e.checkPoint,c=y(),a=Object(n.useState)([]),r=Object(i.a)(a,2),l=r[0],j=r[1],u=Object(n.useState)([]),b=Object(i.a)(u,2),h=b[0],m=b[1],p=Object(n.useState)({}),f=Object(i.a)(p,2),x=f[0],v=f[1],k=Object(n.useState)([]),g=Object(i.a)(k,2),C=g[0],M=g[1];Object(n.useEffect)((function(){var e=L(t);j(e)}),[t]),Object(n.useEffect)((function(){var e=O.a.reduce(l,(function(e,t){return[].concat(Object(F.a)(e),Object(F.a)(t.stockData))}),[]),t=O.a.map(l,(function(e){return e.stockCode})),n=O()(c).map((function(e,t){return t})).filter((function(e){return!O.a.includes(t,e)})).sort().value();m(e),M(n)}),[l,c]);var P=function(e){var c=Object(o.a)(Object(o.a)({},x),{},Object(s.a)({},e,!0));v(c),S(e).then((function(){var c=Object(o.a)(Object(o.a)({},x),{},Object(s.a)({},e,!1));v(c);var n=L(t);j(n)}))};return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("h2",{children:"Stocks List"}),Object(d.jsx)(B,{data:h,showMatchAnyway:!0,title:"All"}),Object(d.jsx)("hr",{}),Object(d.jsx)("br",{}),l.map((function(e){return Object(d.jsxs)(n.Fragment,{children:[Object(d.jsx)(B,{data:e.stockData,title:c[e.stockCode],stockCode:e.stockCode,lastUpdate:e.lastUpdate,handleUpdate:P,isLoading:x[e.stockCode]}),Object(d.jsx)("hr",{})]},e.stockCode)})),C.map((function(e){return Object(d.jsxs)(n.Fragment,{children:[Object(d.jsx)(B,{title:c[e],stockCode:e,handleUpdate:P,isLoading:x[e]}),Object(d.jsx)("hr",{})]},e)}))]})},G=c(76),J=c(77),U=c(78),Y=c(75),K=function(e){var t=e.show,c=e.handleModalClose,a=Object(n.useState)(!1),r=Object(i.a)(a,2),s=r[0],o=r[1],l=Object(n.useState)(!1),j=Object(i.a)(l,2),u=j[0],b=j[1];return Object(d.jsxs)(G.a,{show:t,onHide:c,backdrop:"static",backdropClassName:"api-key-modal",centered:!0,children:[Object(d.jsx)(G.a.Header,{children:Object(d.jsx)(G.a.Title,{children:"Welcome to Stocks Analyzer"})}),Object(d.jsxs)(G.a.Body,{children:["please enter API Key",Object(d.jsxs)(J.a,{onSubmit:function(e){e.preventDefault(),b(!0),M(e.target.apikey.value).then((function(e){b(!1),c()})).catch((function(e){o(!0),b(!1),console.log(e)}))},children:[Object(d.jsx)(J.a.Group,{children:Object(d.jsx)(J.a.Control,{type:"text",name:"apikey",placeholder:"API Key"})}),s&&Object(d.jsx)(U.a,{variant:"danger",children:"API Key is invalid - try again"}),Object(d.jsx)(Y.a,{variant:"primary",type:"submit",disabled:u,children:u?"Loading...":"Save API Key"})]})]}),Object(d.jsxs)(G.a.Footer,{children:[Object(d.jsxs)("p",{children:["If you don't have an API Key. Please Sign up to"," ",Object(d.jsx)("a",{href:"https://twelvedata.com/",rel:"noreferrer",target:"_blank",children:"TwelveData"})," ","and get it."]}),Object(d.jsx)("br",{}),Object(d.jsx)("p",{children:Object(d.jsx)("small",{children:"This app is made for my personal use. I have no intention to make profit out of it. I am not committing the app data is correct. The data calculation is made by me and with no professional knowledge."})})]})]})},_=function(){var e=Object(n.useState)({time:3,percent:""}),t=Object(i.a)(e,2),c=t[0],a=t[1],r=Object(n.useState)(!1),j=Object(i.a)(r,2),h=j[0],O=j[1];Object(n.useEffect)((function(){C()||O(!0)}),[]);return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(u,{}),Object(d.jsxs)("div",{className:"jumbotron",children:[Object(d.jsx)(b,{checkPoint:c,handleCheckpointChange:function(e){e.preventDefault();var t=e.target,c=t.name,n=t.value,r=function(e,t){var c=Number(t);return"percent"!==e?c:c<.01||c>30?"":c}(c,n);a((function(e){return Object(o.a)(Object(o.a)({},e),{},Object(s.a)({},c,r))}))}}),Object(d.jsxs)(l.c,{children:[Object(d.jsx)(l.a,{path:"/stock/:code",render:function(){return Object(d.jsx)(T,{checkPoint:c})}}),Object(d.jsx)(l.a,{path:"/stock",render:function(){return Object(d.jsx)(T,{checkPoint:c})}}),Object(d.jsx)(l.a,{path:"/",render:function(){return Object(d.jsx)(E,{checkPoint:c})}})]})]}),Object(d.jsx)(K,{show:h,handleModalClose:function(){return O(!1)}})]})};var z=function(){return Object(d.jsx)("div",{id:"stock-app",className:"container-fluid",children:Object(d.jsx)(_,{})})},V=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,79)).then((function(t){var c=t.getCLS,n=t.getFID,a=t.getFCP,r=t.getLCP,s=t.getTTFB;c(e),n(e),a(e),r(e),s(e)}))};c(69),c(70),c(71);r.a.render(Object(d.jsx)(j.a,{basename:"/stocks-analyzer",children:Object(d.jsx)(z,{})}),document.getElementById("root")),V()}},[[72,1,2]]]);
//# sourceMappingURL=main.49fee9a3.chunk.js.map